<!-- Language Learning Settings Tab -->
{% load i18n %}
    <!-- Langues d'apprentissage -->
    <div class="content-section">
        <div class="section-header">
            <h3 class="section-title">
                <i class="bi bi-translate"></i>
                {% trans "Learning Languages" %}
            </h3>
            <div class="section-actions">
                <button class="section-toggle">
                    <i class="bi bi-chevron-up"></i>
                </button>
            </div>
        </div>
        <div class="section-content">
            <form method="post"
                  hx-post="{% url 'saas_web:language_learning_settings' %}"
                  hx-trigger="change delay:500ms from:select"
                  hx-target="#htmx-messages"
                  hx-swap="innerHTML">
                {% csrf_token %}
                <input type="hidden" name="setting_type" value="languages">

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="native_language">{% trans "Native Language" %}</label>
                        <select id="native_language" name="native_language" class="form-control">
                            <option value="EN" {% if user.learning_profile.native_language == 'EN' %}selected{% endif %}>🇬🇧 English</option>
                            <option value="FR" {% if user.learning_profile.native_language == 'FR' %}selected{% endif %}>🇫🇷 Français</option>
                            <option value="ES" {% if user.learning_profile.native_language == 'ES' %}selected{% endif %}>🇪🇸 Español</option>
                            <option value="DE" {% if user.learning_profile.native_language == 'DE' %}selected{% endif %}>🇩🇪 Deutsch</option>
                            <option value="IT" {% if user.learning_profile.native_language == 'IT' %}selected{% endif %}>🇮🇹 Italiano</option>
                            <option value="PT" {% if user.learning_profile.native_language == 'PT' %}selected{% endif %}>🇵🇹 Português</option>
                            <option value="NL" {% if user.learning_profile.native_language == 'NL' %}selected{% endif %}>🇳🇱 Nederlands</option>
                        </select>
                        <div class="form-help">{% trans "Your native language for translations and explanations" %}</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="target_language">{% trans "Target Language" %}</label>
                        <select id="target_language" name="target_language" class="form-control">
                            <option value="EN" {% if user.learning_profile.target_language == 'EN' %}selected{% endif %}>🇬🇧 English</option>
                            <option value="FR" {% if user.learning_profile.target_language == 'FR' %}selected{% endif %}>🇫🇷 Français</option>
                            <option value="ES" {% if user.learning_profile.target_language == 'ES' %}selected{% endif %}>🇪🇸 Español</option>
                            <option value="DE" {% if user.learning_profile.target_language == 'DE' %}selected{% endif %}>🇩🇪 Deutsch</option>
                            <option value="IT" {% if user.learning_profile.target_language == 'IT' %}selected{% endif %}>🇮🇹 Italiano</option>
                            <option value="PT" {% if user.learning_profile.target_language == 'PT' %}selected{% endif %}>🇵🇹 Português</option>
                            <option value="NL" {% if user.learning_profile.target_language == 'NL' %}selected{% endif %}>🇳🇱 Nederlands</option>
                            <option value="ZH" {% if user.learning_profile.target_language == 'ZH' %}selected{% endif %}>🇨🇳 中文</option>
                            <option value="JA" {% if user.learning_profile.target_language == 'JA' %}selected{% endif %}>🇯🇵 日本語</option>
                            <option value="KO" {% if user.learning_profile.target_language == 'KO' %}selected{% endif %}>🇰🇷 한국어</option>
                        </select>
                        <div class="form-help">{% trans "Language you are currently learning" %}</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="language_level">{% trans "Current Level" %}</label>
                        <select id="language_level" name="language_level" class="form-control">
                            <option value="A1" {% if user.learning_profile.language_level == 'A1' %}selected{% endif %}>{% trans "Beginner (A1)" %}</option>
                            <option value="A2" {% if user.learning_profile.language_level == 'A2' %}selected{% endif %}>{% trans "Elementary (A2)" %}</option>
                            <option value="B1" {% if user.learning_profile.language_level == 'B1' %}selected{% endif %}>{% trans "Intermediate (B1)" %}</option>
                            <option value="B2" {% if user.learning_profile.language_level == 'B2' %}selected{% endif %}>{% trans "Upper Intermediate (B2)" %}</option>
                            <option value="C1" {% if user.learning_profile.language_level == 'C1' %}selected{% endif %}>{% trans "Advanced (C1)" %}</option>
                            <option value="C2" {% if user.learning_profile.language_level == 'C2' %}selected{% endif %}>{% trans "Proficient (C2)" %}</option>
                        </select>
                        <div class="form-help">{% trans "Your current level in the target language" %}</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="objectives">{% trans "Learning Objectives" %}</label>
                        <select id="objectives" name="objectives" class="form-control">
                            <option value="TRAVEL" {% if user.learning_profile.objectives == 'TRAVEL' %}selected{% endif %}>{% trans "Travel" %}</option>
                            <option value="BUSINESS" {% if user.learning_profile.objectives == 'BUSINESS' %}selected{% endif %}>{% trans "Business & Career" %}</option>
                            <option value="ACADEMIC" {% if user.learning_profile.objectives == 'ACADEMIC' %}selected{% endif %}>{% trans "Academic Studies" %}</option>
                            <option value="PERSONAL" {% if user.learning_profile.objectives == 'PERSONAL' %}selected{% endif %}>{% trans "Personal Interest" %}</option>
                            <option value="CULTURE" {% if user.learning_profile.objectives == 'CULTURE' %}selected{% endif %}>{% trans "Cultural Understanding" %}</option>
                            <option value="FAMILY" {% if user.learning_profile.objectives == 'FAMILY' %}selected{% endif %}>{% trans "Family & Relationships" %}</option>
                        </select>
                        <div class="form-help">{% trans "What motivates you to learn this language?" %}</div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Préférences d'apprentissage -->
    <div class="content-section">
        <div class="section-header">
            <h3 class="section-title">
                <i class="bi bi-mortarboard-fill"></i>
                Préférences d'apprentissage
            </h3>
            <div class="section-actions">
                <button class="section-toggle">
                    <i class="bi bi-chevron-up"></i>
                </button>
            </div>
        </div>
        <div class="section-content">
            <form id="language_learning_goals_form" method="post"
                  hx-post="{% url 'saas_web:language_learning_settings' %}"
                  hx-trigger="change delay:500ms from:input"
                  hx-target="#htmx-messages"
                  hx-swap="innerHTML">
                {% csrf_token %}
                <input type="hidden" name="setting_type" value="language_learning">

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="daily_goal_minutes">Objectif quotidien</label>
                        <div class="input-group">
                            <input type="number" id="daily_goal_minutes" name="daily_goal_minutes" 
                                   min="5" max="300" step="5" value="15" class="form-control">
                            <span class="input-text">minutes par jour</span>
                        </div>
                        <div class="form-help">Temps que vous souhaitez consacrer chaque jour à l'apprentissage</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="weekly_goal_days">Objectif hebdomadaire</label>
                        <div class="input-group">
                            <input type="number" id="weekly_goal_days" name="weekly_goal_days" 
                                   min="1" max="7" value="5" class="form-control">
                            <span class="input-text">jours par semaine</span>
                        </div>
                        <div class="form-help">Nombre de jours où vous souhaitez étudier chaque semaine</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="preferred_study_time">Heure préférée d'étude</label>
                        <input type="time" id="preferred_study_time" name="preferred_study_time" 
                               value="18:00" class="form-control">
                        <div class="form-help">Heure à laquelle vous préférez étudier</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="reminder_frequency">Fréquence des rappels</label>
                        <select id="reminder_frequency" name="reminder_frequency" class="form-control">
                            <option value="daily">Quotidien</option>
                            <option value="weekdays" selected>Jours de semaine</option>
                            <option value="custom">Personnalisé</option>
                        </select>
                        <div class="form-help">À quelle fréquence recevoir des rappels</div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-row">
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="reminder_enabled" checked>
                                <span class="checkbox-custom"></span>
                                Activer les rappels
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="streak_notifications" checked>
                                <span class="checkbox-custom"></span>
                                Notifications de série
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="achievement_notifications" checked>
                                <span class="checkbox-custom"></span>
                                Notifications de réussite
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Préférences d'apprentissage -->
    <div class="content-section">
        <div class="section-header">
            <h3 class="section-title">
                <i class="bi bi-gear"></i>
                Préférences d'apprentissage
            </h3>
            <div class="section-actions">
                <button class="section-toggle">
                    <i class="bi bi-chevron-up"></i>
                </button>
            </div>
        </div>
        <div class="section-content">
            <form id="language_learning_preferences_form" method="post"
                  hx-post="{% url 'saas_web:language_learning_settings' %}"
                  hx-trigger="change delay:500ms from:input,select"
                  hx-target="#htmx-messages"
                  hx-swap="innerHTML">
                {% csrf_token %}
                <input type="hidden" name="setting_type" value="language_learning_preferences">
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="preferred_difficulty">Niveau de difficulté préféré</label>
                        <select id="preferred_difficulty" name="preferred_difficulty" class="form-control">
                            <option value="easy">Facile</option>
                            <option value="normal">Normal</option>
                            <option value="hard">Difficile</option>
                            <option value="adaptive" selected>Adaptatif</option>
                        </select>
                        <div class="form-help">Le système ajustera automatiquement en mode adaptatif</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="audio_playback_speed">Vitesse de lecture audio</label>
                        <div class="input-group">
                            <input type="range" id="audio_playback_speed" name="audio_playback_speed" 
                                   min="0.5" max="2.0" step="0.1" value="1.0" class="form-range">
                            <span class="range-value" id="speed_value">1.0x</span>
                        </div>
                        <div class="form-help">Vitesse de lecture des contenus audio</div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Méthodes d'apprentissage préférées</label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="flashcards" checked>
                                <span class="checkbox-custom"></span>
                                Cartes mémoire
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="listening" checked>
                                <span class="checkbox-custom"></span>
                                Écoute
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="speaking">
                                <span class="checkbox-custom"></span>
                                Expression orale
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="reading">
                                <span class="checkbox-custom"></span>
                                Lecture
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="writing">
                                <span class="checkbox-custom"></span>
                                Écriture
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="grammar">
                                <span class="checkbox-custom"></span>
                                Grammaire
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="learning_methods" value="vocabulary" checked>
                                <span class="checkbox-custom"></span>
                                Vocabulaire
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="form-row">
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="auto_difficulty_adjustment" checked>
                                <span class="checkbox-custom"></span>
                                Ajustement automatique de la difficulté
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="enable_audio_playback" checked>
                                <span class="checkbox-custom"></span>
                                Activer la lecture audio
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="show_pronunciation_hints" checked>
                                <span class="checkbox-custom"></span>
                                Afficher les indices de prononciation
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" name="show_progress_animations" checked>
                                <span class="checkbox-custom"></span>
                                Animations de progression
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Presets rapides -->
    <div class="content-section">
        <div class="section-header">
            <h3 class="section-title">
                <i class="bi bi-lightning"></i>
                Configurations rapides
            </h3>
            <div class="section-actions">
                <button class="section-toggle">
                    <i class="bi bi-chevron-up"></i>
                </button>
            </div>
        </div>
        <div class="section-content">
            <div class="preset-grid">
                <div class="preset-card" onclick="applyLanguageLearningPreset('casual')">
                    <i class="bi bi-clock preset-icon"></i>
                    <h4>Apprentissage décontracté</h4>
                    <p>10 min/jour, 3 jours/semaine<br>Niveau facile, sans pression</p>
                </div>
                <div class="preset-card" onclick="applyLanguageLearningPreset('regular')">
                    <i class="bi bi-calendar-check preset-icon"></i>
                    <h4>Apprentissage régulier</h4>
                    <p>15 min/jour, 5 jours/semaine<br>Progression constante et équilibrée</p>
                </div>
                <div class="preset-card" onclick="applyLanguageLearningPreset('intensive')">
                    <i class="bi bi-lightning-fill preset-icon"></i>
                    <h4>Apprentissage intensif</h4>
                    <p>30 min/jour, 6 jours/semaine<br>Pour progresser rapidement</p>
                </div>
                <div class="preset-card" onclick="applyLanguageLearningPreset('immersion')">
                    <i class="bi bi-rocket-takeoff preset-icon"></i>
                    <h4>Immersion totale</h4>
                    <p>60 min/jour, 7 jours/semaine<br>Apprentissage maximum</p>
                </div>
            </div>
        </div>
    </div>