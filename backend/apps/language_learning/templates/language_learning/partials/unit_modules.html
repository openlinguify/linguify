<div class="animate-slide-in">
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-2">{{ active_unit.title }}</h2>
        <p class="text-gray-600">{{ active_unit.description }}</p>
    </div>

    <div class="module-grid">
        {% for item in modules %}
        <div
            class="module-card {% if item.is_completed %}completed{% endif %} {% if item.is_locked %}locked{% endif %}"
            {% if not item.is_locked %}
            hx-get="{% url 'language_learning:start_module' item.module.id %}"
            hx-target="#module-modal"
            hx-trigger="click"
            {% endif %}
        >
            {% if item.is_completed %}
            <div class="module-card-status completed">
                <i class="bi bi-check-circle-fill"></i>
            </div>
            {% elif item.is_locked %}
            <div class="module-card-status locked">
                <i class="bi bi-lock-fill"></i>
            </div>
            {% endif %}

            <span class="module-type-badge type-{{ item.module.module_type }}">
                {% if item.module.module_type == 'vocabulary' %}
                    <i class="bi bi-book mr-1"></i>
                {% elif item.module.module_type == 'grammar' %}
                    <i class="bi bi-pencil mr-1"></i>
                {% elif item.module.module_type == 'listening' %}
                    <i class="bi bi-headphones mr-1"></i>
                {% elif item.module.module_type == 'speaking' %}
                    <i class="bi bi-mic mr-1"></i>
                {% elif item.module.module_type == 'reading' %}
                    <i class="bi bi-book-half mr-1"></i>
                {% elif item.module.module_type == 'writing' %}
                    <i class="bi bi-pen mr-1"></i>
                {% elif item.module.module_type == 'culture' %}
                    <i class="bi bi-globe2 mr-1"></i>
                {% else %}
                    <i class="bi bi-arrow-repeat mr-1"></i>
                {% endif %}
                {{ item.module.get_module_type_display }}
            </span>

            <h5 class="module-title">{{ item.module.title }}</h5>
            <p class="module-description">{{ item.module.description }}</p>

            <div class="module-meta">
                <span class="module-meta-item">
                    <i class="bi bi-clock"></i>
                    {{ item.module.estimated_duration }} min
                </span>
                <span class="module-meta-item">
                    <i class="bi bi-star"></i>
                    {{ item.module.xp_reward }} XP
                </span>
            </div>
        </div>
        {% empty %}
        <div class="col-span-full">
            <div class="empty-state">
                <i class="bi bi-inbox empty-state-icon"></i>
                <p class="empty-state-description">
                    Aucun module disponible pour cette unit√©.
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>