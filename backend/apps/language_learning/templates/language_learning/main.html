{% extends "saas_web/base.html" %}
{% load static %}

{% block title %}Language Learning - OpenLinguify{% endblock %}

{% block content %}
<!-- Configuration initiale pour l'application Language Learning -->
<script id="language-learning-config" type="application/json">
{
    "selectedLanguage": "{{ selected_language|default:'ES' }}",
    "apiUrls": {
        "dashboard": "{% url 'language_learning:api_dashboard_data' %}",
        "unitDetail": "/language_learning/api/unit/",
        "startModule": "/language_learning/api/module/",
        "completeModule": "/language_learning/api/module/"
    }
}
</script>

<!-- Language Learning App with HTMX + Alpine.js -->
<div id="language-learning-app" class="language-learning-app" x-data="learningDashboard()">

    <!-- Learning Navbar -->
    <div id="navbar-container">
        {% include 'language_learning/partials/navbar.html' %}
    </div>

    <!-- Main Content -->
    <div class="container-fluid">
        <div id="main-content" class="fade-in">
            <!-- Le contenu sera affichÃ© directement ici -->
            {% include 'language_learning/partials/learning_content.html' %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<!-- Linguify Learning Tailwind styles -->
<link rel="stylesheet" href="{% static 'css/tailwind-learning.css' %}">
<style>
/* Exercise Interface Styles */
.option-button {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.option-button:hover:not(:disabled) {
    border-color: var(--linguify-primary) !important;
    background: rgba(45, 91, 186, 0.05) !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(45, 91, 186, 0.1);
}

.option-selected {
    border-color: var(--linguify-primary) !important;
    background: rgba(45, 91, 186, 0.1) !important;
    color: var(--linguify-primary) !important;
    font-weight: 600;
}

.option-correct {
    border-color: var(--linguify-success) !important;
    background: rgba(16, 185, 129, 0.1) !important;
    color: var(--linguify-success) !important;
}

.option-incorrect {
    border-color: #ef4444 !important;
    background: rgba(239, 68, 68, 0.1) !important;
    color: #ef4444 !important;
}

.option-disabled {
    opacity: 0.6;
    cursor: not-allowed !important;
}

.sentence-container input {
    display: inline-block;
    min-width: 120px;
    border: none !important;
    border-bottom: 2px solid var(--linguify-primary) !important;
    background: transparent;
    border-radius: 0;
    padding: 0.25rem 0.5rem;
}

.sentence-container input:focus {
    outline: none;
    border-bottom-color: var(--linguify-accent) !important;
    box-shadow: 0 2px 0 var(--linguify-accent);
}
</style>
{% endblock %}

{% block extra_js %}
<!-- HTMX -->
<script src="https://unpkg.com/htmx.org@1.9.10"></script>
<!-- Alpine.js -->
<script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<!-- Learning JavaScript -->
<script src="{% static 'language_learning/js/learning.js' %}"></script>
{% endblock %}