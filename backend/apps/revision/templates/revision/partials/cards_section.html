{% load i18n %}
<!-- Cards Section - OptimisÃ© -->
<div class="px-3 py-2 border-t border-gray-200">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem;">
        <h6 style="font-size: 0.875rem; font-weight: 600; color: #2D5BBA; margin-bottom: 0;">{% trans "Deck cards" %}</h6>
        <div style="display: flex; align-items: center; gap: 0.5rem;">
            <span id="cardsCount" class="badge-linguify" style="font-size: 0.75rem; padding: 0.25rem 0.5rem;">{% trans "0 card(s)" %}</span>
            <!-- Bulk selection controls - ALWAYS VISIBLE FOR DEBUG -->
            <button id="selectAllCards"
                    class="btn-linguify-secondary"
                    style="display: inline-flex !important; font-size: 0.75rem; padding: 0.25rem 0.5rem; cursor: pointer; align-items: center; justify-content: center;"
                    title="{% trans 'Select all cards' %}">
                <i class="bi bi-check-square"></i>
            </button>
        </div>
    </div>

    <!-- Bulk actions bar (shown when cards are selected) -->
    <div id="bulkActionsBar"
         style="display: none; background-color: #E3F2FD; border: 1px solid #90CAF9; border-radius: 0.5rem; padding: 0.5rem; margin-bottom: 0.5rem; align-items: center; justify-content: space-between;">
        <span id="selectedCardsCount" style="font-size: 0.875rem; font-weight: 500; color: #1976D2;">0 {% trans "selected" %}</span>
        <div style="display: flex; gap: 0.5rem;">
            <button id="deselectAllCards"
                    class="btn-linguify-secondary"
                    style="font-size: 0.75rem; padding: 0.25rem 0.5rem; cursor: pointer;">
                <i class="bi bi-x-lg" style="margin-right: 0.25rem;"></i>
                {% trans "Deselect all" %}
            </button>
            <button id="deleteSelectedCards"
                    class="btn btn-danger"
                    style="font-size: 0.75rem; padding: 0.25rem 0.5rem; cursor: pointer; background-color: #dc3545; color: white; border: none; border-radius: 0.25rem;">
                <i class="bi bi-trash" style="margin-right: 0.25rem;"></i>
                {% trans "Delete selection" %}
            </button>
        </div>
    </div>
    
    <!-- Language Settings for the Deck - Compact -->
    <div id="deckLanguageSettings" class="bg-gray-50 rounded-lg p-2 mb-2" style="display: none;">
        <div class="grid grid-cols-2 gap-2 mb-2">
            <div class="flex flex-col">
                <label class="text-xs font-medium text-gray-600 mb-1">{% trans "Front" %}</label>
                <select id="deckFrontLanguage" class="form-select text-xs py-1 px-2 rounded border border-gray-300">
                    <option value="">ðŸ”„ Auto</option>
                    <option value="fr">ðŸ‡«ðŸ‡· FR</option>
                    <option value="en">ðŸ‡ºðŸ‡¸ EN</option>
                     <option value="es">ðŸ‡ªðŸ‡¸ ES</option>
                     <option value="nl">nl NL</option>
                </select>
            </div>
            <div class="flex flex-col">
                <label class="text-xs font-medium text-gray-600 mb-1">{% trans "Back" %}</label>
                <select id="deckBackLanguage" class="form-select text-xs py-1 px-2 rounded border border-gray-300">
                    <option value="">ðŸ”„ Auto</option>
                    <option value="fr">ðŸ‡«ðŸ‡· FR</option>
                    <option value="en">ðŸ‡ºðŸ‡¸ EN</option>
                    <option value="es">ðŸ‡ªðŸ‡¸ ES</option>
                    <option value="nl">nl NL</option>
                </select>
            </div>
        </div>
        <div class="flex gap-2">
            <button id="applyLanguagesToDeck" class="btn-linguify text-xs px-3 py-1 flex items-center">
                <i class="bi bi-check-lg me-1"></i>
                {% trans "Apply" %}
            </button>
            <button id="applyLanguagesToNewCards" class="btn-linguify-secondary text-xs px-3 py-1 flex items-center">
                <i class="bi bi-plus-circle me-1"></i>
                {% trans "Default" %}
            </button>
        </div>
    </div>
    
    <div id="cardsContainer">
        <!-- Cards will be loaded here -->
    </div>
    
    <!-- Empty State -->
    <div id="noCardsMessage" class="welcome-state no-cards-message-hidden">
        <i class="bi bi-stack text-gray-400" style="font-size: 3rem;"></i>
        <h5 class="welcome-state-title">{% trans "No cards in this deck" %}</h5>
        <p class="welcome-state-description">{% trans "Start by adding some cards to review!" %}</p>
        <button class="btn-linguify" onclick="window.revisionMain.showCreateCardForm()">
            <i class="bi bi-plus-lg mr-2"></i>
            {% trans "Add a card" %}
        </button>
    </div>
</div>