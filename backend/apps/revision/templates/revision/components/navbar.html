<!-- Interface unifiée Linguify -->
<div class="navbar-linguify">
    <!-- Gauche: Navigation + Actions principales -->
    <div class="navbar-section">
        <!-- Bouton toggle sidebar mobile pour autres pages -->
        {% if view_type != 'explore' %}
        <button id="toggleSidebar" class="btn-navbar-outline d-md-none">
            <i class="bi bi-list"></i>
        </button>
        {% endif %}
        
        <!-- Navigation tabs -->
        <div class="nav-tabs-group">
            <a href="{% url 'revision_web:main' %}" 
               class="nav-tab {% if app_name == 'revision' and not study_mode and not view_type %}active{% endif %}">
                <i class="bi bi-stack"></i>
                Liste de cartes
            </a>
            <a href="{% url 'revision_web:explore' %}" 
               class="nav-tab {% if view_type == 'explore' %}active{% endif %}">
                <i class="bi bi-globe2"></i>
                Explorer
            </a>
            <a href="{% url 'revision_web:stats_dashboard' %}" 
               class="nav-tab {% if view_type == 'stats' %}active{% endif %}">
                <i class="bi bi-graph-up"></i>
                Statistiques
            </a>
        </div>
        
        <!-- Refresh -->
        <button id="refreshDecks" class="btn-navbar-outline" title="Actualiser la liste des decks">
            <i class="bi bi-arrow-clockwise"></i>
            <span class="d-none d-xl-inline">Actualiser</span>
        </button>
    </div>
    
    <!-- Droite: Actions et filtres contextuels -->
    <div class="navbar-section-right">
        {% if view_type == 'explore' %}
        <!-- Bouton toggle sidebar pour Explorer -->
        <button id="toggleSidebar" class="btn-navbar-outline" onclick="toggleSidebar()">
            <i class="bi bi-layout-sidebar"></i>
            <span class="d-none d-lg-inline">Filtres</span>
        </button>
        
        <!-- Filtres pour la page Explorer -->
        <input type="text" id="searchInput" class="form-control-linguify" placeholder="Rechercher des decks..." style="width: 180px; min-width: 120px;">
        
        <select id="statusFilter" class="form-select-linguify" style="width: 120px; min-width: 100px;">
            <option value="">Tous les decks</option>
            <option value="new">Récents</option>
            <option value="popular">Populaires</option>
        </select>
        
        <select id="sortFilter" class="form-select-linguify" style="width: 120px; min-width: 100px;">
            <option value="created_at">Plus récents</option>
            <option value="name">A-Z</option>
            <option value="popularity">Popularité</option>
            <option value="cards_count">Nb. cartes</option>
        </select>
        
        <!-- Bouton retour vers mes decks -->
        <a href="{% url 'revision_web:main' %}" class="btn-navbar-outline">
            <i class="bi bi-arrow-left"></i>
            <span class="d-none d-xxl-inline">Mes Decks</span>
        </a>
        
        {% else %}
        <!-- Filtres pour les pages personnelles -->
        <input type="text" id="searchInput" class="form-control-linguify" placeholder="Rechercher..." style="width: 140px; min-width: 100px;">
        
        <!-- Status Filter Dropdown -->
        <div class="dropdown">
            <button id="statusFilterToggle" class="btn btn-outline-linguify dropdown-toggle" style="width: 110px; min-width: 90px;" data-bs-toggle="dropdown">
                <span id="statusFilterText">Tous les statuts</span>
            </button>
            <ul id="statusFilterDropdown" class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="selectStatusFilter('', 'Tous les statuts')">Tous les statuts</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectStatusFilter('active', 'Actifs')">Actifs</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectStatusFilter('archived', 'Archivés')">Archivés</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectStatusFilter('public', 'Publics')">Publics</a></li>
            </ul>
        </div>
        
        <!-- Sort Filter Dropdown -->
        <div class="dropdown">
            <button id="sortFilterToggle" class="btn btn-outline-linguify dropdown-toggle" style="width: 110px; min-width: 90px;" data-bs-toggle="dropdown">
                <span id="sortFilterText">Plus récents</span>
            </button>
            <ul id="sortFilterDropdown" class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('updated_desc', 'Plus récents')">Plus récents</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('name_asc', 'A-Z')">A-Z</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('progress_desc', 'Progression')">Progression</a></li>
            </ul>
        </div>
        
        <!-- Tags Filter Dropdown -->
        <div class="dropdown">
            <button id="tagsFilterToggle" class="btn btn-outline-linguify dropdown-toggle" data-bs-toggle="dropdown">
                <i class="bi bi-tags"></i>
                <span class="d-none d-lg-inline">Tags</span>
                <span class="tags-filter-count" id="tagsFilterCount">0</span>
            </button>
            <ul id="tagsFilterDropdown" class="dropdown-menu">
                <!-- Tags will be dynamically loaded here -->
            </ul>
        </div>
        
        <!-- Actions - Only show when no deck is selected -->
        <div id="generalActions" class="navbar-actions-group">
            <button id="importDeck" class="btn-navbar-outline">
                <i class="bi bi-upload"></i>
                <span class="d-none d-xxl-inline">Importer</span>
            </button>
            
            <button id="createDeck" class="btn-navbar-primary">
                <i class="bi bi-plus-lg"></i>
                <span class="d-none d-xxl-inline">Nouveau</span>
            </button>
        </div>
        {% endif %}
    </div>
</div>