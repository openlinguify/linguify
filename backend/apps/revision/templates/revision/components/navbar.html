<!-- Interface unifiée sur une seule ligne -->
<div class="d-flex align-items-center justify-content-between gap-2" style="min-height: 40px; overflow-x: auto; position: relative; z-index: 1000;">
    <!-- Gauche: Navigation + Actions principales -->
    <div class="d-flex align-items-center gap-3">
        <!-- Bouton toggle sidebar mobile -->
        <button id="toggleSidebar" class="btn btn-outline-custom btn-sm d-md-none">
            <i class="bi bi-list"></i>
        </button>
        
        <!-- Navigation tabs -->
        <div class="d-flex align-items-center gap-1">
            <a href="{% url 'revision_web:main' %}" 
               class="nav-tab {% if app_name == 'revision' and not study_mode and not view_type %}active{% endif %}">
                <i class="bi bi-stack me-1"></i>
                Liste de cartes
            </a>
            <a href="{% url 'revision_web:explore' %}" 
               class="nav-tab {% if view_type == 'explore' %}active{% endif %}">
                <i class="bi bi-globe2 me-1"></i>
                Explorer
            </a>
            <a href="{% url 'revision_web:stats_dashboard' %}" 
               class="nav-tab {% if view_type == 'stats' %}active{% endif %}">
                <i class="bi bi-graph-up me-1"></i>
                Statistiques
            </a>
        </div>
        
        <!-- Refresh -->
        <button id="refreshDecks" class="btn btn-outline-custom btn-sm">
            <i class="bi bi-arrow-clockwise"></i>
            <span class="d-none d-xl-inline ms-1">Actualiser</span>
        </button>
    </div>
    
    <!-- Centre: Statistiques compactes (masquées sur la page de stats) -->
    {% if view_type != 'stats' %}
    <div class="d-none d-lg-flex align-items-center gap-3">
        <div class="d-flex align-items-center gap-2 text-sm">
            <span id="totalDecks" class="fw-semibold text-linguify-primary">0</span>
            <span class="text-muted">Decks</span>
        </div>
        <div class="d-flex align-items-center gap-2 text-sm">
            <span id="totalCards" class="fw-semibold text-linguify-primary">0</span>
            <span class="text-muted">Cartes</span>
        </div>
        <div class="d-flex align-items-center gap-2 text-sm">
            <span id="totalLearned" class="fw-semibold text-linguify-success">0</span>
            <span class="text-muted">Apprises</span>
        </div>
        <div class="d-flex align-items-center gap-2 text-sm">
            <span id="completionRate" class="fw-semibold text-linguify-warning">0%</span>
            <span class="text-muted">Progression</span>
        </div>
    </div>
    {% endif %}
    
    <!-- Droite: Actions et filtres -->
    <div class="d-flex align-items-center gap-1 flex-nowrap">
        <!-- Filtres compacts -->
        <input type="text" id="searchInput" class="form-control form-control-sm search-input" placeholder="Rechercher..." style="width: 140px; min-width: 100px;">
        
        <select id="statusFilter" class="form-select form-select-sm filter-select" style="width: 110px; min-width: 90px;">
            <option value="">Tous les statuts</option>
            <option value="active">Actifs</option>
            <option value="archived">Archivés</option>
            <option value="public">Publics</option>
        </select>
        
        <select id="sortFilter" class="form-select form-select-sm filter-select" style="width: 110px; min-width: 90px;">
            <option value="updated_desc">Plus récents</option>
            <option value="name_asc">A-Z</option>
            <option value="progress_desc">Progression</option>
        </select>
        
        <div class="tags-filter-container">
            <button id="tagsFilterToggle" class="btn btn-tags-filter btn-sm px-2">
                <i class="bi bi-tags"></i>
                <span class="tags-filter-label d-none d-lg-inline">Tags</span>
                <span class="tags-filter-count" id="tagsFilterCount">0</span>
            </button>
            <div id="tagsFilterDropdown" class="tags-filter-dropdown">
                <!-- Tags will be dynamically loaded here -->
            </div>
        </div>
        
        <!-- Actions -->
        <button id="importDeck" class="btn btn-outline-custom btn-sm px-2">
            <i class="bi bi-upload"></i>
            <span class="d-none d-xxl-inline ms-1">Importer</span>
        </button>
        
        <button id="createDeck" class="btn btn-gradient btn-sm px-2">
            <i class="bi bi-plus-lg"></i>
            <span class="d-none d-xxl-inline ms-1">Nouveau</span>
        </button>
    </div>
</div>