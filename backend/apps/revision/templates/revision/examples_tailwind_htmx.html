{% extends "saas_web/base.html" %}
{% load static %}

{% block title %}R√©vision - Exemples Tailwind + HTMX{% endblock %}

{% block extra_css %}
<style>
    /* Custom CSS pour les animations HTMX */
    .htmx-loading {
        opacity: 0.6;
        pointer-events: none;
    }
    
    .htmx-indicator {
        display: none;
    }
    
    .flashcard-flip {
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }
    
    .flashcard-flip.flipped {
        transform: rotateY(180deg);
    }
</style>
{% endblock %}

{% block content %}
<div class="container-linguify py-8">
    <!-- En-t√™te -->
    <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-gray-900 mb-4">
            üé® Exemples <span class="text-linguify-gradient">Tailwind + HTMX</span>
        </h1>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            D√©couvrez les nouvelles possibilit√©s avec Tailwind CSS et HTMX int√©gr√©s dans Linguify
        </p>
    </div>

    <!-- Section 1: Cartes Flashcards -->
    <section class="mb-16">
        <h2 class="text-2xl font-semibold mb-8 text-gray-800">üÉè Cartes Flashcards Interactives</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Flashcard 1 -->
            <div class="flashcard-3d" onclick="this.classList.toggle('flipped')">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">Comment dit-on "Bonjour" en anglais ?</h3>
                            <p class="text-sm text-gray-500">Cliquez pour r√©v√©ler</p>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-blue-800 mb-2">Hello</h3>
                            <p class="text-sm text-blue-600">Salutation courante</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flashcard 2 -->
            <div class="flashcard-3d" onclick="this.classList.toggle('flipped')">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">What is "learning" in French?</h3>
                            <p class="text-sm text-gray-500">Cliquez pour r√©v√©ler</p>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-blue-800 mb-2">Apprentissage</h3>
                            <p class="text-sm text-blue-600">Nom masculin</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flashcard 3 -->
            <div class="flashcard-3d" onclick="this.classList.toggle('flipped')">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">¬øC√≥mo se dice "water" en espa√±ol?</h3>
                            <p class="text-sm text-gray-500">Cliquez pour r√©v√©ler</p>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div class="text-center">
                            <h3 class="text-lg font-semibold text-blue-800 mb-2">Agua</h3>
                            <p class="text-sm text-blue-600">Sustantivo femenino</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Actions HTMX -->
    <section class="mb-16">
        <h2 class="text-2xl font-semibold mb-8 text-gray-800">‚ö° Actions Dynamiques avec HTMX</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Recherche en temps r√©el -->
            <div class="card-linguify">
                <h3 class="text-lg font-semibold mb-4">üîç Recherche en temps r√©el</h3>
                <div>
                    <input 
                        type="text" 
                        class="input-linguify mb-4"
                        placeholder="Tapez pour rechercher des cartes..."
                        hx-get="/revision/search/"
                        hx-target="#search-results"
                        hx-trigger="input changed delay:300ms, search"
                        hx-indicator="#search-spinner"
                    >
                    <div id="search-spinner" class="htmx-indicator">
                        <div class="spinner-linguify w-6 h-6 mx-auto"></div>
                    </div>
                    <div id="search-results" class="mt-4">
                        <p class="text-gray-500 text-sm">Commencez √† taper pour voir les r√©sultats...</p>
                    </div>
                </div>
            </div>

            <!-- Ajout de carte -->
            <div class="card-linguify">
                <h3 class="text-lg font-semibold mb-4">‚ûï Ajouter une carte</h3>
                <form 
                    hx-post="/revision/add-card/"
                    hx-target="#card-list"
                    hx-swap="afterbegin"
                    hx-indicator="#add-spinner"
                >
                    <div class="space-y-4">
                        <input 
                            type="text" 
                            name="front"
                            class="input-linguify"
                            placeholder="Face avant"
                            required
                        >
                        <input 
                            type="text" 
                            name="back"
                            class="input-linguify"
                            placeholder="Face arri√®re"
                            required
                        >
                        <button type="submit" class="btn-linguify w-full">
                            <span id="add-spinner" class="htmx-indicator spinner-linguify w-4 h-4 mr-2"></span>
                            Ajouter la carte
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Section 3: Liste dynamique -->
    <section class="mb-16">
        <h2 class="text-2xl font-semibold mb-8 text-gray-800">üìù Liste de Cartes Dynamique</h2>
        
        <div class="card-linguify">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-semibold">Mes Cartes</h3>
                <div class="flex gap-2">
                    <button 
                        class="btn-linguify-outline"
                        hx-get="/revision/cards/all/"
                        hx-target="#card-list"
                        hx-indicator="#list-spinner"
                    >
                        Toutes
                    </button>
                    <button 
                        class="btn-linguify-outline"
                        hx-get="/revision/cards/recent/"
                        hx-target="#card-list"
                        hx-indicator="#list-spinner"
                    >
                        R√©centes
                    </button>
                </div>
            </div>
            
            <div id="list-spinner" class="htmx-indicator text-center py-8">
                <div class="spinner-linguify w-8 h-8 mx-auto"></div>
            </div>
            
            <div id="card-list" class="space-y-3">
                <!-- Cartes existantes -->
                <div class="border border-gray-200 rounded-lg p-4 flex justify-between items-center">
                    <div>
                        <strong class="text-gray-800">Hello</strong>
                        <span class="text-gray-500 mx-2">‚Üí</span>
                        <span class="text-gray-600">Bonjour</span>
                    </div>
                    <div class="flex gap-2">
                        <button 
                            class="text-blue-600 hover:text-blue-800 text-sm"
                            hx-get="/revision/edit-card/1/"
                            hx-target="#edit-modal"
                            hx-trigger="click"
                        >
                            Modifier
                        </button>
                        <button 
                            class="text-red-600 hover:text-red-800 text-sm"
                            hx-delete="/revision/delete-card/1/"
                            hx-target="closest div"
                            hx-swap="outerHTML"
                            hx-confirm="√ätes-vous s√ªr ?"
                        >
                            Supprimer
                        </button>
                    </div>
                </div>

                <div class="border border-gray-200 rounded-lg p-4 flex justify-between items-center">
                    <div>
                        <strong class="text-gray-800">Learning</strong>
                        <span class="text-gray-500 mx-2">‚Üí</span>
                        <span class="text-gray-600">Apprentissage</span>
                    </div>
                    <div class="flex gap-2">
                        <button 
                            class="text-blue-600 hover:text-blue-800 text-sm"
                            hx-get="/revision/edit-card/2/"
                            hx-target="#edit-modal"
                        >
                            Modifier
                        </button>
                        <button 
                            class="text-red-600 hover:text-red-800 text-sm"
                            hx-delete="/revision/delete-card/2/"
                            hx-target="closest div"
                            hx-swap="outerHTML"
                            hx-confirm="√ätes-vous s√ªr ?"
                        >
                            Supprimer
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Modes d'√©tude -->
    <section class="mb-16">
        <h2 class="text-2xl font-semibold mb-8 text-gray-800">üéØ Modes d'√âtude</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="study-mode-card" 
                 hx-get="/revision/mode/flashcards/"
                 hx-target="#study-content"
                 hx-indicator="#mode-spinner">
                <div class="text-center">
                    <div class="text-4xl mb-4">üÉè</div>
                    <h3 class="font-semibold mb-2">Flashcards</h3>
                    <p class="text-sm text-gray-600">R√©visez avec des cartes interactives</p>
                </div>
            </div>

            <div class="study-mode-card"
                 hx-get="/revision/mode/quiz/"
                 hx-target="#study-content"
                 hx-indicator="#mode-spinner">
                <div class="text-center">
                    <div class="text-4xl mb-4">üß©</div>
                    <h3 class="font-semibold mb-2">Quiz</h3>
                    <p class="text-sm text-gray-600">Testez vos connaissances</p>
                </div>
            </div>

            <div class="study-mode-card"
                 hx-get="/revision/mode/writing/"
                 hx-target="#study-content"
                 hx-indicator="#mode-spinner">
                <div class="text-center">
                    <div class="text-4xl mb-4">‚úçÔ∏è</div>
                    <h3 class="font-semibold mb-2">√âcriture</h3>
                    <p class="text-sm text-gray-600">Pratiquez l'orthographe</p>
                </div>
            </div>
        </div>

        <div class="mt-8">
            <div id="mode-spinner" class="htmx-indicator text-center py-8">
                <div class="spinner-linguify w-8 h-8 mx-auto mb-4"></div>
                <p class="text-gray-600">Chargement du mode d'√©tude...</p>
            </div>
            
            <div id="study-content" class="card-linguify">
                <div class="text-center py-8 text-gray-500">
                    S√©lectionnez un mode d'√©tude ci-dessus
                </div>
            </div>
        </div>
    </section>

    <!-- Section 5: Statistiques en temps r√©el -->
    <section class="mb-16">
        <h2 class="text-2xl font-semibold mb-8 text-gray-800">üìä Statistiques en Temps R√©el</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6" 
             hx-get="/revision/stats/"
             hx-trigger="load, every 30s"
             hx-target="this"
             hx-swap="innerHTML">
            
            <div class="card-linguify text-center">
                <div class="text-3xl font-bold text-blue-600 mb-2">42</div>
                <div class="text-sm text-gray-600">Cartes √©tudi√©es</div>
                <div class="progress-linguify mt-3">
                    <div class="progress-bar-linguify" style="width: 75%"></div>
                </div>
            </div>

            <div class="card-linguify text-center">
                <div class="text-3xl font-bold text-emerald-600 mb-2">85%</div>
                <div class="text-sm text-gray-600">Taux de r√©ussite</div>
                <div class="progress-linguify mt-3">
                    <div class="progress-bar-linguify" style="width: 85%"></div>
                </div>
            </div>

            <div class="card-linguify text-center">
                <div class="text-3xl font-bold text-purple-600 mb-2">7</div>
                <div class="text-sm text-gray-600">S√©rie actuelle</div>
                <div class="progress-linguify mt-3">
                    <div class="progress-bar-linguify" style="width: 60%"></div>
                </div>
            </div>

            <div class="card-linguify text-center">
                <div class="text-3xl font-bold text-orange-600 mb-2">12</div>
                <div class="text-sm text-gray-600">Min √©tudi√©es</div>
                <div class="progress-linguify mt-3">
                    <div class="progress-bar-linguify" style="width: 40%"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal pour √©dition (sera rempli via HTMX) -->
    <div id="edit-modal"></div>

    <!-- Notifications de succ√®s (exemple) -->
    <div class="fixed bottom-4 right-4 space-y-2" id="notifications">
        <!-- Les notifications appara√Ætront ici via HTMX -->
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Scripts sp√©cifiques √† cette page
document.addEventListener('DOMContentLoaded', function() {
    // Animation des cartes lors du clic
    document.querySelectorAll('.study-mode-card').forEach(card => {
        card.addEventListener('htmx:afterRequest', function() {
            // Ajouter une classe active temporaire
            document.querySelectorAll('.study-mode-card').forEach(c => c.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    // Gestion du scroll fluide pour les nouveaux √©l√©ments
    document.body.addEventListener('htmx:afterSwap', function(evt) {
        if (evt.detail.target.id === 'card-list') {
            // Scroll vers le nouvel √©l√©ment ajout√©
            const newElement = evt.detail.target.firstElementChild;
            if (newElement) {
                newElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
    });
});
</script>
{% endblock %}