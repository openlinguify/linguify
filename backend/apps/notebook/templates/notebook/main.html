{% extends "notebook/base.html" %}
{% load static %}

{% block header_content %}
<!-- Div où Owl montera la navbar -->
<div id="owl-navbar-mount"></div>
{% endblock %}

{% block content %}
<!-- Contenu principal géré par Owl WebClient -->

<!-- Modals et éléments persistants -->
{% include 'notebook/components/tags-management-modal.html' %}

<!-- CSRF Token pour les API calls -->
<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

<!-- Styles pour l'interface Owl -->
<style>
/* Application avec header existant */
.o_webclient {
    width: 100% !important;
    height: calc(100vh - 60px) !important; /* Laisser place au header Django */
    margin: 0 !important;
    padding: 0 !important;
    background: white !important;
    display: flex !important;
    flex-direction: column !important;
}

/* Point de montage pleine largeur */
#owl-navbar-mount {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Workspace pleine largeur */
.notebook-workspace {
    width: 100% !important;
    flex: 1 !important; /* Prendre tout l'espace restant après la navbar */
    margin: 0 !important;
    padding: 0 !important;
    display: flex !important;
}

/* Navbar pleine largeur */
.navbar-linguify {
    width: 100% !important;
    height: 60px !important;
    min-height: 60px !important;
    margin: 0 !important;
    padding: 0 15px !important;
    box-sizing: border-box !important;
    flex-shrink: 0 !important; /* Ne pas rétrécir */
}

/* Hover effects pour les notes */
.note-item:hover {
    background-color: #f8f9fa !important;
    border-color: #dee2e6 !important;
    transform: translateY(-1px);
}

/* Note sélectionnée */
.note-item.selected {
    background-color: #e3f2fd !important;
    border-color: #2196f3 !important;
    box-shadow: 0 2px 4px rgba(33, 150, 243, 0.1);
}

.note-item.selected .note-title {
    color: #1976d2 !important;
}

/* Sélection multiple */
.note-item.multi-selected {
    background-color: #fff3e0 !important;
    border-color: #ff9800 !important;
    box-shadow: 0 2px 4px rgba(255, 152, 0, 0.1);
}

.note-item.multi-selected .note-title {
    color: #f57c00 !important;
}

/* Note sélectionnée ET dans la sélection multiple */
.note-item.selected.multi-selected {
    background-color: #e8f5e8 !important;
    border-color: #4caf50 !important;
    box-shadow: 0 2px 4px rgba(76, 175, 80, 0.2);
}

.note-item.selected.multi-selected .note-title {
    color: #388e3c !important;
}

/* Sidebar */
.sidebar-linguify {
    width: 300px;
    min-width: 300px;
    background: white;
    border-right: 1px solid #dee2e6;
    height: 100% !important;
    overflow-y: auto;
    transition: margin-left 0.3s ease;
}

/* Sidebar cachée */
.sidebar-linguify.sidebar-hidden {
    margin-left: -300px;
}

/* Editor zone */
.notebook-editor {
    flex: 1 !important;
    height: 100% !important;
    overflow: hidden !important;
}

/* Editor responsivity */
@media (max-width: 768px) {
    .sidebar-linguify {
        width: 250px;
        min-width: 250px;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<!-- Owl Framework -->
<script src="https://unpkg.com/@odoo/owl@2/dist/owl.iife.js"></script>
<script src="{% static 'notebook/js/main.js' %}"></script>
<!-- Anciens scripts désactivés pour Owl -->
<!-- <script src="{% static 'notebook/js/notebook.js' %}"></script> -->
<!-- <script src="{% static 'notebook/js/notebook-tags-management.js' %}"></script> -->
{% endblock %}