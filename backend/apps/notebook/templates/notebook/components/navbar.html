{% load static %}
<!-- Interface unifiee Linguify -->
<div class="navbar-linguify">
    <!-- Gauche: Navigation + Actions principales -->
    <div class="navbar-section">
        <!-- Bouton toggle sidebar pour toutes les pages -->
        <button id="toggleSidebar" 
                class="btn-navbar-outline" 
                title="Masquer/Afficher la barre latérale"
                aria-label="Basculer la barre latérale"
                aria-expanded="true"
                onclick="toggleSidebar()">
            <i class="bi bi-layout-sidebar-inset" aria-hidden="true"></i>
        </button>
        
        <!-- Navigation tabs -->
        <div class="nav-tabs-group">
            <a href="#" class="nav-tab active" onclick="showNotesView()">
                <i class="bi bi-journal-text"></i>
                Mes notes
            </a>
            <a href="#" class="nav-tab" onclick="showArchivedView()">
                <i class="bi bi-archive"></i>
                Archives
            </a>
            <a href="#" class="nav-tab" onclick="showTagsView()">
                <i class="bi bi-tags"></i>
                Etiquettes
            </a>
        </div>
        
        <!-- Refresh -->
        <button id="refreshNotes" class="btn-navbar btn-navbar-outline" title="Actualiser les notes" onclick="refreshNotes()">
            <i class="bi bi-arrow-clockwise"></i>
            <span class="d-none d-xl-inline">Actualiser</span>
        </button>
    </div>
    
    <!-- Droite: Actions et filtres contextuels -->
    <div class="navbar-section-right">
        <!-- Filtres -->
        <input type="text" id="searchInput" class="form-control-linguify" placeholder="Rechercher..." style="width: 140px; min-width: 100px;" onkeyup="debounceSearch()">
        
        <!-- Language Filter Dropdown -->
        <div class="dropdown">
            <button id="languageFilterToggle" class="btn btn-outline-linguify dropdown-toggle" style="width: 110px; min-width: 90px;" data-bs-toggle="dropdown">
                <span id="languageFilterText">Toutes langues</span>
            </button>
            <ul id="languageFilterDropdown" class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="selectLanguageFilter('', 'Toutes langues')">Toutes langues</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectLanguageFilter('fr', 'Francais')">Francais</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectLanguageFilter('en', 'Anglais')">Anglais</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectLanguageFilter('es', 'Espagnol')">Espagnol</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectLanguageFilter('de', 'Allemand')">Allemand</a></li>
            </ul>
        </div>
        
        <!-- Sort Filter Dropdown -->
        <div class="dropdown">
            <button id="sortFilterToggle" class="btn btn-outline-linguify dropdown-toggle" style="width: 110px; min-width: 90px;" data-bs-toggle="dropdown">
                <span id="sortFilterText">Plus recentes</span>
            </button>
            <ul id="sortFilterDropdown" class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('updated_desc', 'Plus recentes')">Plus recentes</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('updated_asc', 'Plus anciennes')">Plus anciennes</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('title_asc', 'Titre A-Z')">Titre A-Z</a></li>
                <li><a class="dropdown-item" href="#" onclick="selectSortFilter('title_desc', 'Titre Z-A')">Titre Z-A</a></li>
            </ul>
        </div>
        
        <!-- Tags Filter Dropdown -->
        <div class="dropdown">
            <button id="tagsFilterToggle" class="btn btn-outline-linguify dropdown-toggle" style="width: 110px; min-width: 90px;" data-bs-toggle="dropdown">
                <span id="tagsFilterText">Tous les tags</span>
            </button>
            <ul id="tagsFilterDropdown" class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="selectTagsFilter('', 'Tous les tags')">Tous les tags</a></li>
                <!-- Tags will be dynamically loaded here -->
            </ul>
        </div>
        
        <!-- Actions -->
        <div class="navbar-actions-group">
            <button id="manageNotebookTagsBtn" class="btn-navbar btn-navbar-outline" title="Gerer les etiquettes">
                <i class="bi bi-tag-fill"></i>
                <span class="d-none d-xxl-inline">Tags</span>
            </button>
            
            <button id="saveButton" class="btn-navbar btn-navbar-outline" onclick="saveCurrentNote(true)" title="Sauvegarder la note">
                <i class="bi bi-cloud-check"></i>
                <span class="d-none d-xxl-inline">Sauver</span>
            </button>
            
            <button id="createNewNote" class="btn-navbar btn-navbar-primary" onclick="createNewNote()">
                <i class="bi bi-plus-lg"></i>
                <span class="d-none d-xxl-inline">Nouvelle</span>
            </button>
        </div>
    </div>
</div>