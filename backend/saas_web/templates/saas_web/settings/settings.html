{% extends 'saas_web/base.html' %}
{% load static %}
{% load i18n %}
{% load dict_filters %}

{% block title %}Paramètres - Linguify{% endblock %}

{% block body_class %}settings-page{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'saas_web/css/settings.css' %}">
{% endblock %}

{% block content %}
<div class="settings-container">
    <!-- Enhanced Sidebar -->
    <div class="settings-sidebar">
        <div class="sidebar-header">
            <h3>Paramètres</h3>
            <div class="subtitle">Personnalisez votre expérience Linguify</div>
        </div>
        
        <!-- Search -->
        <div class="settings-search">
            <input type="text" class="search-input" placeholder="Rechercher des paramètres...">
        </div>
        
        <!-- Navigation Categories -->
        <nav class="settings-nav">
            {% for category_id, category in settings_categories.items %}
            <div class="nav-category">
                <div class="nav-category-title">
                    <i class="{{ category.icon }}"></i>
                    {{ category.name }}
                </div>
                {% for tab in category.tabs %}
                <a href="{{ settings_urls|get_item:tab.id }}" class="nav-item{% if tab.active %} active{% endif %}" data-tab="{{ tab.id }}">
                    <div class="nav-item-text">
                        <i class="{{ tab.icon }}"></i>
                        {{ tab.name }}
                    </div>
                    {% if tab.source == 'auto_discovered' %}
                    <span class="nav-item-badge">Auto</span>
                    {% endif %}
                </a>
                {% endfor %}
            </div>
            {% endfor %}
        </nav>
    </div>
    
    <!-- Main Content -->
    <div class="settings-main">
        <!-- Header -->
        <div class="main-content-header">
            <div class="breadcrumb-nav">
                <span>Linguify</span>
                <i class="bi bi-chevron-right"></i>
                <span class="active">Profil & Compte</span>
            </div>
            <h1 class="page-title">Profil & Compte</h1>
            <p class="page-subtitle">Gérez vos informations personnelles et paramètres de compte</p>
        </div>
        
        <!-- Content Body -->
        <div class="main-content-body">
            <!-- Dynamic Settings Tabs -->
            {% for tab in settings_tabs %}
                {% if tab.template %}
                    {% include tab.template %}
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<!-- Auto-save indicator (dynamically created) -->
{% endblock %}

{% block extra_js %}
<!-- Core settings functionality -->
<script src="{% static 'src/js/settings-utils.js' %}"></script>
<script src="{% static 'src/js/settings-core.js' %}"></script>

<!-- App-specific settings scripts -->
<script src="{% static 'authentication/js/settings.js' %}"></script>
<script src="{% static 'vocal/js/settings.js' %}"></script>
<script src="{% static 'chat/js/settings.js' %}"></script>
<script src="{% static 'quizz/js/settings.js' %}"></script>
<script src="{% static 'notebook/js/settings.js' %}"></script>
<script src="{% static 'community/js/settings.js' %}"></script>
<script src="{% static 'course/js/settings.js' %}"></script>
<script src="{% static 'notification/js/settings.js' %}"></script>
{% endblock %}