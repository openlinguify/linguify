{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html lang="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% trans "Open Linguify | Open Source Education Apps" %}{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'images/favicon.ico' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/icons/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/icons/favicon-16x16.png' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/icons/apple-touch-icon.png' %}">

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="{% block meta_description %}{% trans 'OpenLinguify: Free open-source platform for language learning with AI flashcards, spaced repetition, quizzes & collaborative tools. Start learning now!' %}{% endblock %}">


    <meta name="keywords" content="{% block meta_keywords %}
openlinguify, open linguify, OpenLinguify, Open Linguify, openlinguify.com, linguify platform, linguify educational apps, linguify open source, apprentissage, éducation en ligne, outils éducatifs, flashcards, quiz, révision, mémoire, cours en ligne, application éducative, carnet de notes, IA éducative, social learning, apprentissage collaboratif, flashcard, education tools, chat, online

learning, online education, educational tools, flashcards, quizzes, study, memory, spaced repetition, online courses, study tools, learning app, smart education, revision tools, AI learning, digital notebook, collaborative learning,

aprendizaje, educación en línea, herramientas educativas, tarjetas didácticas, cuestionarios, repaso, memoria, cursos online, aprendizaje colaborativo, aplicación de estudio, repetición espaciada,

lernen, Online-Bildung, Lernwerkzeuge, Karteikarten, Quiz, Wiederholung, Gedächtnis, Online-Kurse, Lernplattform, KI-Lernen, Notizbuch online, gemeinsames Lernen,

apprendimento, istruzione online, strumenti educativi, flashcard, quiz, studio, memoria, corsi online, intelligenza artificiale per l’istruzione, apprendimento collaborativo, app didattica,

aprendizagem, educação online, ferramentas educacionais, flashcards, questionários, estudo, memória, cursos online, repetição espaçada, aplicação educativa, caderno digital, aprendizagem colaborativa,

leren, online onderwijs, educatieve tools, flashcards, quizzen, studeren, geheugen, online cursussen, leertools, digitaal notitieboek, samenwerken leren,

nauka, edukacja online, narzędzia edukacyjne, fiszki, quizy, powtórka, pamięć, kursy online, aplikacja edukacyjna, inteligentna nauka, nauczanie wspólne,

التعلم, التعليم الإلكتروني, أدوات تعليمية, بطاقات تعليمية, اختبارات, مراجعة, ذاكرة, تطبيق تعليمي, دفاتر ملاحظات رقمية, التعلم الجماعي, الذكاء الاصطناعي في التعليم,

学習, オンライン教育, 教育ツール, フラッシュカード, クイズ, 復習, 記憶, スマート学習, オンラインコース, ノートアプリ, AI学習, 協働学習,

学习, 在线教育, 教育工具, 闪卡, 测验, 复习, 记忆, 在线课程, 学习工具, 智能学习, 数字笔记本, 协作学习, 教育AI,

शिक्षा, ऑनलाइन शिक्षा, शैक्षणिक उपकरण, फ्लैशकार्ड, क्विज़, अध्ययन, मेमोरी, ऑनलाइन कोर्स, शिक्षण ऐप, पुनरावृत्ति, एआई शिक्षा, सहयोगी शिक्षा
{% endblock %}">
    <meta name="author" content="OpenLinguify Team">
    <meta property="og:site_name" content="OpenLinguify">

    <!-- Open Graph -->
    <meta property="og:title"
        content="{% block og_title %}{% trans 'OpenLinguify - Open source educational apps platform' %}{% endblock %}">
    <meta property="og:description"
        content="{% block og_description %}{% trans 'Discover OpenLinguify, a complete suite of open source educational apps: smart memorization, flashcards, note-taking, interactive quizzes, collaborative chat, virtual classrooms and much more. Revolutionize the way you learn.' %}{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    <meta property="og:image" content="https://www.openlinguify.com{% static 'public_web/images/og-image.png' %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="OpenLinguify - Open Source Educational Platform">
    <meta property="og:locale" content="{% get_current_language as LANGUAGE_CODE %}{{ LANGUAGE_CODE }}_{% if LANGUAGE_CODE == 'en' %}US{% elif LANGUAGE_CODE == 'fr' %}FR{% elif LANGUAGE_CODE == 'es' %}ES{% elif LANGUAGE_CODE == 'nl' %}NL{% endif %}">
    <meta property="og:locale:alternate" content="en_US">
    <meta property="og:locale:alternate" content="fr_FR">
    <meta property="og:locale:alternate" content="es_ES">
    <meta property="og:locale:alternate" content="nl_NL">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@openlinguify">
    <meta name="twitter:creator" content="@openlinguify">
    <meta name="twitter:title"
        content="{% block twitter_title %}{% trans 'OpenLinguify - Open source platform for modern education' %}{% endblock %}">
    <meta name="twitter:description"
        content="{% block twitter_description %}{% trans 'OpenLinguify: Complete suite of open source educational apps: memorization, flashcards, notes, quizzes, collaborative chat and much more.' %}{% endblock %}">
    <meta name="twitter:image" content="https://www.openlinguify.com{% static 'public_web/images/og-image.png' %}">
    <meta name="twitter:image:alt" content="OpenLinguify Educational Platform">

    <!-- Additional SEO -->
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#349ea3">
    <link rel="canonical" href="{{ request.build_absolute_uri }}">

    <!-- Hreflang for multilingual SEO -->
    {% get_current_language as CURRENT_LANG %}
    {% get_available_languages as AVAILABLE_LANGS %}
    <link rel="alternate" hreflang="en" href="https://www.openlinguify.com/en{{ request.path|slice:'3:' }}">
    <link rel="alternate" hreflang="fr" href="https://www.openlinguify.com/fr{{ request.path|slice:'3:' }}">
    <link rel="alternate" hreflang="es" href="https://www.openlinguify.com/es{{ request.path|slice:'3:' }}">
    <link rel="alternate" hreflang="nl" href="https://www.openlinguify.com/nl{{ request.path|slice:'3:' }}">
    <link rel="alternate" hreflang="x-default" href="https://www.openlinguify.com/en{{ request.path|slice:'3:' }}">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    {% load static %}

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'public_web/css/main.css' %}">
    {% block extra_css %}{% endblock %}

    <!-- Favicons - Configuration complète pour tous navigateurs -->
    <link rel="icon" type="image/png" sizes="48x48" href="{% static 'images/icons/favicon-48x48.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'images/icons/android-chrome-192x192.png' %}">

    <!-- Spécifique pour Google et Microsoft -->
    <meta name="msapplication-TileImage" content="{% static 'images/icons/android-chrome-192x192.png' %}">
    <meta name="msapplication-TileColor" content="#349ea3">

    <!-- PWA Manifest -->
    <link rel="manifest" href="{% static 'manifest.json' %}">


    <!-- Structured Data / Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "@id": "https://www.openlinguify.com/#organization",
        "name": "OpenLinguify",
        "alternateName": ["Open Linguify", "openlinguify"],
        "url": "https://www.openlinguify.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.openlinguify.com{% static 'images/favicon.png' %}",
            "width": 512,
            "height": 512
        },
        "description": "{% trans 'OpenLinguify is an open source educational platform offering AI-powered language learning tools, flashcards, quizzes, and collaborative learning features.' %}",
        "sameAs": [
            "https://github.com/openlinguify",
            "https://twitter.com/openlinguify",
            "https://linkedin.com/company/openlinguify"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer support",
            "url": "https://www.openlinguify.com/contact/",
            "availableLanguage": ["English", "French", "Spanish", "Dutch"]
        }
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "@id": "https://www.openlinguify.com/#website",
        "url": "https://www.openlinguify.com/",
        "name": "OpenLinguify",
        "description": "{% trans 'Open source educational platform for language learning' %}",
        "publisher": {
            "@id": "https://www.openlinguify.com/#organization"
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://www.openlinguify.com/search?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        },
        "inLanguage": ["en", "fr", "es", "nl"]
    }
    </script>

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://www.openlinguify.com/"
            }
        ]
    }
    </script>

    {% block structured_data %}{% endblock %}

    {% block extra_head %}{% endblock %}
</head>

<body>
    <!-- Include public header -->
    {% include 'components/public_header.html' %}

    <!-- Main content -->
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- Include public footer -->
    {% include 'components/public_footer.html' %}

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JS -->
    <script src="{% static 'public_web/js/main.js' %}"></script>

    <!-- Language switching -->
    <script>
        function setLanguage(lang) {
            // Simple approach: redirect directly to the language-prefixed URL
            const currentPath = window.location.pathname;
            const pathParts = currentPath.split('/').filter(part => part !== '');
            
            // Remove existing language prefix if present
            const supportedLanguages = ['fr', 'en', 'es', 'nl'];
            if (pathParts.length > 0 && supportedLanguages.includes(pathParts[0])) {
                pathParts.shift(); // Remove the first part (language code)
            }
            
            // Build new URL with the selected language
            const newPath = '/' + lang + '/' + pathParts.join('/');
            window.location.href = newPath;
        }
    </script>

    {% block extra_js %}{% endblock %}
</body>

</html>